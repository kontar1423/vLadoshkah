# üìò –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Å –≤–∞—à–∏–º API. –í—Å–µ
–æ—Ç–≤–µ—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ **JSON**.\
–ë–∞–∑–æ–≤—ã–π URL:

    /api

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization`:

```http
Authorization: Bearer YOUR_ACCESS_TOKEN
```

–¢–æ–∫–µ–Ω –≤—ã–¥–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞ –∏–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 7 –¥–Ω–µ–π.

------------------------------------------------------------------------

## üîë –†–∞–∑–¥–µ–ª: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/api/auth`)

### POST `/api/auth/register`

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):**

``` json
{
  "email": "newuser@example.com",
  "password": "securepassword123",
  "role": "user"
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

``` json
{
  "success": true,
  "message": "User registered successfully",
  "user": {
    "id": 10,
    "email": "newuser@example.com",
    "role": "user",
    "firstname": null,
    "lastname": null,
    "gender": null,
    "phone": null
  },
  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**

- `email`: –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, –≤–∞–ª–∏–¥–Ω—ã–π email, max 100 —Å–∏–º–≤–æ–ª–æ–≤
- `password`: –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤, max 255
- `role`: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –æ–¥–∏–Ω –∏–∑: `user`, `admin`, `shelter_admin` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `user`)

------------------------------------------------------------------------

### POST `/api/auth/login`

–í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º—É.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):**

``` json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

``` json
{
  "success": true,
  "message": "Login successful",
  "user": {
    "id": 1,
    "email": "user@example.com",
    "role": "user",
    "firstname": "–ò–≤–∞–Ω",
    "lastname": "–ò–≤–∞–Ω–æ–≤"
  },
  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**–û—à–∏–±–∫–∏:**

- `401`: –ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å
- `400`: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç email –∏–ª–∏ –ø–∞—Ä–æ–ª—å

------------------------------------------------------------------------

### POST `/api/auth/refresh`

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access —Ç–æ–∫–µ–Ω–∞ —Å –ø–æ–º–æ—â—å—é refresh —Ç–æ–∫–µ–Ω–∞.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):**

``` json
{
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

``` json
{
  "success": true,
  "message": "Token refreshed successfully",
  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**–û—à–∏–±–∫–∏:**

- `401`: Refresh —Ç–æ–∫–µ–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –∏—Å—Ç–µ–∫

------------------------------------------------------------------------

## üìã –†–∞–∑–¥–µ–ª: –ó–∞—è–≤–∫–∏ –Ω–∞ —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏–µ (`/api/applications`)

**–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.**

### POST `/api/applications`

–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞—è–≤–∫—É –Ω–∞ —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏–µ.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):**

``` json
{
  "user_id": 1,
  "shelter_id": 4,
  "animal_id": 9,
  "description": "–£ –º–µ–Ω—è –±–æ–ª—å—à–æ–π –¥–æ–º —Å –¥–≤–æ—Ä–æ–º –∏ –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å —Å–æ–±–∞–∫–∞–º–∏. –ì–æ—Ç–æ–≤ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∂–∏–≤–æ—Ç–Ω–æ–º—É –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π —É—Ö–æ–¥ –∏ –∑–∞–±–æ—Ç—É."
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

``` json
{
  "id": 1,
  "user_id": 1,
  "shelter_id": 4,
  "animal_id": 9,
  "status": "pending",
  "description": "–£ –º–µ–Ω—è –±–æ–ª—å—à–æ–π –¥–æ–º —Å –¥–≤–æ—Ä–æ–º...",
  "created_at": "2025-01-18T10:00:00.000Z",
  "updated_at": "2025-01-18T10:00:00.000Z"
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**

- `user_id`: –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ
- `shelter_id`: –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ
- `animal_id`: –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ
- `description`: –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, –º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤, –º–∞–∫—Å–∏–º—É–º 5000
- `status`: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –æ–¥–∏–Ω –∏–∑: `pending`, `approved`, `rejected`, `cancelled` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `pending`)

------------------------------------------------------------------------

### GET `/api/applications`

–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞—è–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

``` json
[
  {
    "id": 1,
    "user_id": 1,
    "shelter_id": 4,
    "animal_id": 9,
    "status": "pending",
    "description": "–£ –º–µ–Ω—è –±–æ–ª—å—à–æ–π –¥–æ–º...",
    "created_at": "2025-01-18T10:00:00.000Z",
    "updated_at": "2025-01-18T10:00:00.000Z"
  }
]
```

------------------------------------------------------------------------

### GET `/api/applications/:id`

–ü–æ–ª—É—á–∏—Ç—å –∑–∞—è–≤–∫—É –ø–æ ID.

**–ü—Ä–∏–º–µ—Ä:**\
`GET /api/applications/1`

------------------------------------------------------------------------

### PUT `/api/applications/:id`

–û–±–Ω–æ–≤–∏—Ç—å –∑–∞—è–≤–∫—É (–≤—Å–µ –ø–æ–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã, –Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ).

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):**

``` json
{
  "status": "approved",
  "description": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"
}
```

------------------------------------------------------------------------

### DELETE `/api/applications/:id`

–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É.

**–û—Ç–≤–µ—Ç:**\
–°—Ç–∞—Ç—É—Å `204 No Content` –ø—Ä–∏ —É—Å–ø–µ—Ö–µ

------------------------------------------------------------------------

### GET `/api/applications/count/approved`

–ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –∑–∞—è–≤–æ–∫.

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

``` json
{
  "count": 42
}
```

------------------------------------------------------------------------

## üêæ –†–∞–∑–¥–µ–ª: –ñ–∏–≤–æ—Ç–Ω—ã–µ (`/api/animals`)

**–ü—É–±–ª–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:** –í—Å–µ GET –∑–∞–ø—Ä–æ—Å—ã\
**–ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:** POST, PUT, PATCH, DELETE (—Ç—Ä–µ–±—É—é—Ç —Ä–æ–ª—å `admin` –∏–ª–∏ `shelter_admin`)

### GET `/api/animals`

–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö.

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

``` json
[
  {
    "id": 9,
    "name": "–ë–∞—Ä—Å–∏–∫",
    "age": 2,
    "type": "cat",
    "shelter_id": 4,
    "health": "–∑–¥–æ—Ä–æ–≤",
    "gender": "male",
    "color": "—Ä—ã–∂–∏–π",
    "weight": 4.5,
    "personality": "–ª–∞—Å–∫–æ–≤—ã–π, –∏–≥—Ä–∏–≤—ã–π",
    "animal_size": "medium",
    "history": "–ù–∞–π–¥–µ–Ω –Ω–∞ —É–ª–∏—Ü–µ, –ø—Ä–æ—à–µ–ª –∫–∞—Ä–∞–Ω—Ç–∏–Ω",
    "shelter_name": "–ì–ª–∞–≤–Ω—ã–π –ø—Ä–∏—é—Ç –¥–ª—è –∂–∏–≤–æ—Ç–Ω—ã—Ö",
    "photos": [
      { "url": "/uploads/7d5726b9-16c1-4884-b1b2-15ab5c74b6ea.jpg" }
    ]
  }
]
```

------------------------------------------------------------------------

### GET `/api/animals/filters`

–ü–æ–ª—É—á–∏—Ç—å –∂–∏–≤–æ—Ç–Ω—ã—Ö —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏.\
–ü–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã --- query (–Ω–∞–ø—Ä–∏–º–µ—Ä: `?type=cat&age_min=1&age_max=5`)

**–ü—Ä–∏–º–µ—Ä:**\
`GET /api/animals/filters?type=dog&gender=female&age_min=1&age_max=5`

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:**

- `type` - –≤–∏–¥ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ (cat, dog)
- `gender` - –ø–æ–ª (male, female)
- `age_min` - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç
- `age_max` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç
- `animal_size` - —Ä–∞–∑–º–µ—Ä (small, medium, large)
- `health` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–¥–æ—Ä–æ–≤—å—è
- `shelter_id` - ID –ø—Ä–∏—é—Ç–∞
- `search` - –ø–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, —Ü–≤–µ—Ç—É, —Ç–∏–ø—É, —Ö–∞—Ä–∞–∫—Ç–µ—Ä—É

------------------------------------------------------------------------

### GET `/api/animals/:id`

–ü–æ–ª—É—á–∏—Ç—å –∂–∏–≤–æ—Ç–Ω–æ–µ –ø–æ ID.

**–ü—Ä–∏–º–µ—Ä:**\
`GET /api/animals/9`

------------------------------------------------------------------------

### GET `/api/animals/shelter/:shelterId`

–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏—é—Ç–∞.

**–ü—Ä–∏–º–µ—Ä:**\
`GET /api/animals/shelter/4`

------------------------------------------------------------------------

### POST `/api/animals`

–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ.\
**–¢—Ä–µ–±—É–µ—Ç:** —Ä–æ–ª—å `admin` –∏–ª–∏ `shelter_admin`\
**–¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞:** `multipart/form-data`

**–ü–æ–ª—è:**

- `name` - –∏–º—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `age` - –≤–æ–∑—Ä–∞—Å—Ç (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, 0-30)
- `type` - –≤–∏–¥ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `gender` - –ø–æ–ª (male/female)
- `color` - –æ–∫—Ä–∞—Å
- `weight` - –≤–µ—Å
- `personality` - –æ–ø–∏—Å–∞–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞
- `animal_size` - —Ä–∞–∑–º–µ—Ä (small/medium/large)
- `history` - –∏—Å—Ç–æ—Ä–∏—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
- `shelter_id` - ID –ø—Ä–∏—é—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `photo` - —Ñ–æ—Ç–æ (—Ñ–∞–π–ª)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (FormData):**

``` js
const formData = new FormData();
formData.append("name", "–ú—É—Ä–∫–∞");
formData.append("age", "3");
formData.append("type", "cat");
formData.append("gender", "female");
formData.append("color", "—á–µ—Ä–Ω–∞—è");
formData.append("weight", "3.2");
formData.append("shelter_id", "4");
formData.append("photo", fileInput.files[0]);

await fetch("/api/animals", { 
  method: "POST", 
  body: formData,
  headers: {
    "Authorization": "Bearer YOUR_TOKEN"
  }
});
```

------------------------------------------------------------------------

### PUT `/api/animals/:id`

–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ (–≤—Å–µ –ø–æ–ª—è).

**–¢—Ä–µ–±—É–µ—Ç:** —Ä–æ–ª—å `admin` –∏–ª–∏ `shelter_admin`

**–ü—Ä–∏–º–µ—Ä:**\
`PUT /api/animals/9`

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):

``` json
{ "name": "–ë–æ–±–∏–∫", "age": 4, "color": "—Å–µ—Ä—ã–π" }
```

------------------------------------------------------------------------

### PATCH `/api/animals/:id`

–ß–∞—Å—Ç–∏—á–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ.

**–¢—Ä–µ–±—É–µ—Ç:** —Ä–æ–ª—å `admin` –∏–ª–∏ `shelter_admin`

------------------------------------------------------------------------

### DELETE `/api/animals/:id`

–£–¥–∞–ª–∏—Ç—å –∂–∏–≤–æ—Ç–Ω–æ–µ –ø–æ ID.

**–¢—Ä–µ–±—É–µ—Ç:** —Ä–æ–ª—å `admin` –∏–ª–∏ `shelter_admin`

**–û—Ç–≤–µ—Ç:**\
–°—Ç–∞—Ç—É—Å `204 No Content` –ø—Ä–∏ —É—Å–ø–µ—Ö–µ

------------------------------------------------------------------------

### GET `/api/animals/search/:term`

–ü–æ–∏—Å–∫ –∂–∏–≤–æ—Ç–Ω—ã—Ö –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ –≤–∏–¥—É.

**–ü—Ä–∏–º–µ—Ä:**\
`GET /api/animals/search/–±–∞—Ä—Å–∏–∫`

------------------------------------------------------------------------

## üì∏ –†–∞–∑–¥–µ–ª: –§–æ—Ç–æ (`/api/photos`)

**–ü—É–±–ª–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:** GET –∑–∞–ø—Ä–æ—Å—ã\
**–ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:** POST, DELETE (—Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

### POST `/api/photos/upload`

–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ.\
**–¢—Ä–µ–±—É–µ—Ç:** –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è\
–¢–∏–ø: `multipart/form-data`

**–ü–æ–ª—è:**

- `photo` - —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–û—Ç–≤–µ—Ç:**

``` json
{ "id": 12, "object_name": "photo_12.jpg", "url": "/uploads/photo_12.jpg" }
```

------------------------------------------------------------------------

### GET `/api/photos/info/:id`

–ü–æ–ª—É—á–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ç–æ.

**–ü—Ä–∏–º–µ—Ä:**\
`GET /api/photos/info/12`

------------------------------------------------------------------------

### GET `/api/photos/file/:objectName`

–ü–æ–ª—É—á–∏—Ç—å —Å–∞–º —Ñ–∞–π–ª —Ñ–æ—Ç–æ.

**–ü—Ä–∏–º–µ—Ä:**\
`GET /api/photos/file/photo_12.jpg`

------------------------------------------------------------------------

### DELETE `/api/photos/:id`

–£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ –ø–æ ID.

**–¢—Ä–µ–±—É–µ—Ç:** –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

------------------------------------------------------------------------

### GET `/api/photos/entity/:entityType/:entityId`

–ü–æ–ª—É—á–∏—Ç—å —Ñ–æ—Ç–æ, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ —Å—É—â–Ω–æ—Å—Ç–∏.

**–ü—Ä–∏–º–µ—Ä:**\
`GET /api/photos/entity/animal/9`

**–í–æ–∑–º–æ–∂–Ω—ã–µ —Ç–∏–ø—ã —Å—É—â–Ω–æ—Å—Ç–µ–π:** `animal`, `shelter`, `user`

------------------------------------------------------------------------

### GET `/api/photos`

–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ñ–æ—Ç–æ –≤ —Å–∏—Å—Ç–µ–º–µ.

------------------------------------------------------------------------

## üè† –†–∞–∑–¥–µ–ª: –ü—Ä–∏—é—Ç—ã (`/api/shelters`)

**–ü—É–±–ª–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:** GET –∑–∞–ø—Ä–æ—Å—ã\
**–ê–¥–º–∏–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:** POST, PUT, PATCH, DELETE (—Ç—Ä–µ–±—É—é—Ç —Ä–æ–ª—å `admin`)

### GET `/api/shelters`

–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–∏—é—Ç–æ–≤.

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

``` json
[
  {
    "id": 4,
    "name": "–ì–ª–∞–≤–Ω—ã–π –ø—Ä–∏—é—Ç –¥–ª—è –∂–∏–≤–æ—Ç–Ω—ã—Ö",
    "address": "—É–ª. –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è, 1, –≥. –ú–æ—Å–∫–≤–∞",
    "phone": "+79990000001",
    "email": "shelter@example.com",
    "website": "https://shelter-example.ru",
    "description": "–ö—Ä—É–ø–Ω—ã–π –ø—Ä–∏—é—Ç —Å –±–æ–ª–µ–µ —á–µ–º 10-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã. –ó–∞–Ω–∏–º–∞–µ–º—Å—è —Å–ø–∞—Å–µ–Ω–∏–µ–º, –ª–µ—á–µ–Ω–∏–µ–º –∏ –ø—Ä–∏—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º –±–µ–∑–¥–æ–º–Ω—ã—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö.",
    "capacity": 100,
    "working_hours": "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ —Å 9:00 –¥–æ 18:00",
    "status": "active",
    "created_at": "2025-10-18T16:36:34.907Z",
    "updated_at": "2025-10-18T16:36:34.907Z",
    "photos": [
      "/uploads/d334e3a5-5b04-483e-98be-c7e61d24863c.png"
    ]
  }
]
```

------------------------------------------------------------------------

### GET `/api/shelters/:id`

–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∏—é—Ç –ø–æ ID.

**–ü—Ä–∏–º–µ—Ä:**\
`GET /api/shelters/4`

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∂–∏–≤–æ—Ç–Ω—ã—Ö –ø—Ä–∏—é—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `GET /api/animals/shelter/:shelterId` (—Å–º. —Ä–∞–∑–¥–µ–ª "–ñ–∏–≤–æ—Ç–Ω—ã–µ").

------------------------------------------------------------------------

### POST `/api/shelters`

–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏—é—Ç.\
**–¢—Ä–µ–±—É–µ—Ç:** —Ä–æ–ª—å `admin`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):**

``` json
{
  "name": "–î–æ–±—Ä—ã–µ —Ä—É–∫–∏",
  "address": "—É–ª. –õ–µ–Ω–∏–Ω–∞, 10",
  "phone": "+79998887766",
  "email": "new@shelter.ru",
  "website": "https://new-shelter.ru",
  "description": "–ù–æ–≤—ã–π –ø—Ä–∏—é—Ç –¥–ª—è –∫–æ—à–µ–∫ –∏ —Å–æ–±–∞–∫.",
  "capacity": 80,
  "working_hours": "—Å 8:00 –¥–æ 20:00"
}
```

------------------------------------------------------------------------

### PUT `/api/shelters/:id`

–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—é—Ç–∞.\
**–¢—Ä–µ–±—É–µ—Ç:** —Ä–æ–ª—å `admin`

------------------------------------------------------------------------

### PATCH `/api/shelters/:id`

–ß–∞—Å—Ç–∏—á–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—é—Ç–∞.\
**–¢—Ä–µ–±—É–µ—Ç:** —Ä–æ–ª—å `admin`

------------------------------------------------------------------------

### DELETE `/api/shelters/:id`

–£–¥–∞–ª–∏—Ç—å –ø—Ä–∏—é—Ç.\
**–¢—Ä–µ–±—É–µ—Ç:** —Ä–æ–ª—å `admin`

------------------------------------------------------------------------

## üë§ –†–∞–∑–¥–µ–ª: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (`/api/users`)

**–ü—É–±–ª–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:** GET –∑–∞–ø—Ä–æ—Å—ã\
**–ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:** POST, PUT, PATCH (—Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)\
**–ê–¥–º–∏–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:** DELETE (—Ç—Ä–µ–±—É—é—Ç —Ä–æ–ª—å `admin`)

> **–í–∞–∂–Ω–æ:** –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `/api/auth/register`.\
> POST `/api/users` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤—Ä—É—á–Ω—É—é.

### GET `/api/users`

–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

------------------------------------------------------------------------

### GET `/api/users/:id`

–ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID.

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

``` json
{
  "id": 1,
  "firstname": "–ò–≤–∞–Ω",
  "lastname": "–ò–≤–∞–Ω–æ–≤",
  "role": "admin",
  "gender": "male",
  "email": "ivan@example.com"
}
```

------------------------------------------------------------------------

### POST `/api/users`

–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—Ä—É—á–Ω—É—é (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤).

**–¢—Ä–µ–±—É–µ—Ç:** –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è\
**–¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞:** `multipart/form-data` (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è)

**–ü–æ–ª—è:**

- `email` - email (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `password` - –ø–∞—Ä–æ–ª—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `firstname` - –∏–º—è
- `lastname` - —Ñ–∞–º–∏–ª–∏—è
- `role` - —Ä–æ–ª—å: `user`, `admin`, `shelter_admin` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `user`)
- `gender` - –ø–æ–ª
- `phone` - —Ç–µ–ª–µ—Ñ–æ–Ω
- `photo` - —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è (—Ñ–∞–π–ª)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**

``` json
{
  "firstname": "–ò–≤–∞–Ω",
  "lastname": "–ò–≤–∞–Ω–æ–≤",
  "role": "admin",
  "gender": "male",
  "email": "ivan@example.com",
  "password": "123456"
}
```

------------------------------------------------------------------------

### PUT `/api/users/:id`

–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–¢—Ä–µ–±—É–µ—Ç:** –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

------------------------------------------------------------------------

### PATCH `/api/users/:id`

–ß–∞—Å—Ç–∏—á–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–¢—Ä–µ–±—É–µ—Ç:** –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

------------------------------------------------------------------------

### DELETE `/api/users/:id`

–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–¢—Ä–µ–±—É–µ—Ç:** —Ä–æ–ª—å `admin`

**–û—Ç–≤–µ—Ç:**\
–°—Ç–∞—Ç—É—Å `204 No Content` –ø—Ä–∏ —É—Å–ø–µ—Ö–µ

------------------------------------------------------------------------

## ‚öôÔ∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:

```http
Authorization: Bearer YOUR_ACCESS_TOKEN
```

–¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω **7 –¥–Ω–µ–π**, refresh —Ç–æ–∫–µ–Ω - **30 –¥–Ω–µ–π**.

### –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–æ–≤

- –í—Å–µ POST/PUT/PATCH –∑–∞–ø—Ä–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç `Content-Type: application/json`, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –∏–Ω–æ–µ
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `multipart/form-data`

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í —Å–ª—É—á–∞–µ –æ—à–∏–±–æ–∫ —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON:

``` json
{
  "success": false,
  "error": "–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏"
}
```

**–ö–æ–¥—ã –æ—à–∏–±–æ–∫:**

- `400` - –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `401` - –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è / –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω
- `403` - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤
- `404` - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–í—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é Joi. –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è:

``` json
{
  "success": false,
  "error": "Validation error",
  "details": [
    {
      "field": "email",
      "message": "Email –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è"
    }
  ]
}
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:

- –°–ø–∏—Å–∫–∏ –∂–∏–≤–æ—Ç–Ω—ã—Ö: 1 —á–∞—Å
- –î–∞–Ω–Ω—ã–µ –æ –ø—Ä–∏—é—Ç–∞—Ö: 1 —á–∞—Å
- –î–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö: 30 –º–∏–Ω—É—Ç
- –ó–∞—è–≤–∫–∏: 5 –º–∏–Ω—É—Ç

### –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

- `user` - –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `shelter_admin` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø—Ä–∏—é—Ç–∞
- `admin` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–í–∞–∂–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**

- –ü–∞—Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π **–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è** –≤ –æ—Ç–≤–µ—Ç–∞—Ö API
- –í—Å–µ –ø–∞—Ä–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∑–∞—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ (bcrypt)
- –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ GET `/api/users` –∏–ª–∏ GET `/api/users/:id` –ø–æ–ª–µ `password` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –æ—Ç–≤–µ—Ç–µ
- –í—Å–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ –ª–æ–≥–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ logger –≤–º–µ—Å—Ç–æ console.log
