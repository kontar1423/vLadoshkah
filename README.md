# üìò –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Å –≤–∞—à–∏–º API. –í—Å–µ
–æ—Ç–≤–µ—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ **JSON**.\
–ë–∞–∑–æ–≤—ã–π URL:

    /api

------------------------------------------------------------------------

## üêæ –†–∞–∑–¥–µ–ª: –ñ–∏–≤–æ—Ç–Ω—ã–µ (`/api/animals`)

### GET `/api/animals`

–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö.

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

``` json
[
  {
    "id": 9,
    "name": "–ë–∞—Ä—Å–∏–∫",
    "age": 2,
    "type": "cat",
    "shelter_id": 4,
    "health": "–∑–¥–æ—Ä–æ–≤",
    "gender": "male",
    "color": "—Ä—ã–∂–∏–π",
    "weight": 4.5,
    "personality": "–ª–∞—Å–∫–æ–≤—ã–π, –∏–≥—Ä–∏–≤—ã–π",
    "animal_size": "medium",
    "history": "–ù–∞–π–¥–µ–Ω –Ω–∞ —É–ª–∏—Ü–µ, –ø—Ä–æ—à–µ–ª –∫–∞—Ä–∞–Ω—Ç–∏–Ω",
    "shelter_name": "–ì–ª–∞–≤–Ω—ã–π –ø—Ä–∏—é—Ç –¥–ª—è –∂–∏–≤–æ—Ç–Ω—ã—Ö",
    "photos": [
      { "url": "http://localhost:9000/uploads/7d5726b9-16c1-4884-b1b2-15ab5c74b6ea.jpg" },
      { "url": "http://localhost:9000/uploads/b03a6146-01f2-4ca8-912c-d56c92dce13e.jpg" }
    ]
  }
]
```

------------------------------------------------------------------------

### GET `/api/animals/filters`

–ü–æ–ª—É—á–∏—Ç—å –∂–∏–≤–æ—Ç–Ω—ã—Ö —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏.\
–ü–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã --- query (–Ω–∞–ø—Ä–∏–º–µ—Ä:
`?type=cat&age=2&gender=male`)

**–ü—Ä–∏–º–µ—Ä:**\
`GET /api/animals/filters?type=dog&gender=female`

------------------------------------------------------------------------

### GET `/api/animals/:id`

–ü–æ–ª—É—á–∏—Ç—å –∂–∏–≤–æ—Ç–Ω–æ–µ –ø–æ ID.

**–ü—Ä–∏–º–µ—Ä:**\
`GET /api/animals/9`

------------------------------------------------------------------------

### GET `/api/animals/shelter/:shelterId`

–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏—é—Ç–∞.

**–ü—Ä–∏–º–µ—Ä:**\
`GET /api/animals/shelter/4`

------------------------------------------------------------------------

### POST `/api/animals`

–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ.\
–¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞: `multipart/form-data`\
–ü–æ–ª—è: - `name` --- –∏–º—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ - `age` --- –≤–æ–∑—Ä–∞—Å—Ç - `type` --- –≤–∏–¥
(–Ω–∞–ø—Ä–∏–º–µ—Ä: cat, dog) - `gender` --- –ø–æ–ª (male/female) - `color` ---
–æ–∫—Ä–∞—Å - `weight` --- –≤–µ—Å - `personality` --- –æ–ø–∏—Å–∞–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ -
`animal_size` --- —Ä–∞–∑–º–µ—Ä (small/medium/large) - `history` --- –∏—Å—Ç–æ—Ä–∏—è
–∂–∏–≤–æ—Ç–Ω–æ–≥–æ - `shelter_id` --- ID –ø—Ä–∏—é—Ç–∞ - `photo` --- —Ñ–æ—Ç–æ (—Ñ–∞–π–ª)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (FormData):**

``` js
const formData = new FormData();
formData.append("name", "–ú—É—Ä–∫–∞");
formData.append("age", "3");
formData.append("type", "cat");
formData.append("gender", "female");
formData.append("color", "—á–µ—Ä–Ω–∞—è");
formData.append("weight", "3.2");
formData.append("shelter_id", "4");
formData.append("photo", fileInput.files[0]);

await fetch("/api/animals", { method: "POST", body: formData });
```

------------------------------------------------------------------------

### PUT `/api/animals/:id`

–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ (–≤—Å–µ –ø–æ–ª—è).

**–ü—Ä–∏–º–µ—Ä:**\
`PUT /api/animals/9`

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):

``` json
{ "name": "–ë–æ–±–∏–∫", "age": 4, "color": "—Å–µ—Ä—ã–π" }
```

------------------------------------------------------------------------

### PATCH `/api/animals/:id`

–ß–∞—Å—Ç–∏—á–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ.

------------------------------------------------------------------------

### DELETE `/api/animals/:id`

–£–¥–∞–ª–∏—Ç—å –∂–∏–≤–æ—Ç–Ω–æ–µ –ø–æ ID.

------------------------------------------------------------------------

### GET `/api/animals/search/:term`

–ü–æ–∏—Å–∫ –∂–∏–≤–æ—Ç–Ω—ã—Ö –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ –≤–∏–¥—É.

**–ü—Ä–∏–º–µ—Ä:**\
`GET /api/animals/search/–±–∞—Ä—Å–∏–∫`

------------------------------------------------------------------------

## üì∏ –†–∞–∑–¥–µ–ª: –§–æ—Ç–æ (`/api/photos`)

### POST `/api/photos/upload`

–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ.\
–¢–∏–ø: `multipart/form-data`\
–ü–æ–ª—è:\
- `photo` --- —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–û—Ç–≤–µ—Ç:**

``` json
{ "id": 12, "object_name": "photo_12.jpg", "url": "/uploads/photo_12.jpg" }
```

------------------------------------------------------------------------

### GET `/api/photos/info/:id`

–ü–æ–ª—É—á–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ç–æ.

------------------------------------------------------------------------

### GET `/api/photos/file/:objectName`

–ü–æ–ª—É—á–∏—Ç—å —Å–∞–º —Ñ–∞–π–ª —Ñ–æ—Ç–æ.

------------------------------------------------------------------------

### DELETE `/api/photos/:id`

–£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ –ø–æ ID.

------------------------------------------------------------------------

### GET `/api/photos/entity/:entityType/:entityId`

–ü–æ–ª—É—á–∏—Ç—å —Ñ–æ—Ç–æ, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ —Å—É—â–Ω–æ—Å—Ç–∏.

**–ü—Ä–∏–º–µ—Ä:**\
`GET /api/photos/entity/animal/9`

------------------------------------------------------------------------

### GET `/api/photos`

–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ñ–æ—Ç–æ –≤ —Å–∏—Å—Ç–µ–º–µ.

------------------------------------------------------------------------

## üè† –†–∞–∑–¥–µ–ª: –ü—Ä–∏—é—Ç—ã (`/api/shelters`)

### GET `/api/shelters`

–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–∏—é—Ç–æ–≤.

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

``` json
[
  {
    "id": 4,
    "name": "–ì–ª–∞–≤–Ω—ã–π –ø—Ä–∏—é—Ç –¥–ª—è –∂–∏–≤–æ—Ç–Ω—ã—Ö",
    "address": "—É–ª. –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è, 1, –≥. –ú–æ—Å–∫–≤–∞",
    "phone": "+79990000001",
    "email": "shelter@example.com",
    "website": "https://shelter-example.ru",
    "description": "–ö—Ä—É–ø–Ω—ã–π –ø—Ä–∏—é—Ç —Å –±–æ–ª–µ–µ —á–µ–º 10-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã. –ó–∞–Ω–∏–º–∞–µ–º—Å—è —Å–ø–∞—Å–µ–Ω–∏–µ–º, –ª–µ—á–µ–Ω–∏–µ–º –∏ –ø—Ä–∏—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º –±–µ–∑–¥–æ–º–Ω—ã—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö.",
    "capacity": 100,
    "working_hours": "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ —Å 9:00 –¥–æ 18:00",
    "status": "active",
    "created_at": "2025-10-18T16:36:34.907Z",
    "updated_at": "2025-10-18T16:36:34.907Z",
    "photos": [
      "http://localhost:9000/uploads/d334e3a5-5b04-483e-98be-c7e61d24863c.png"
    ]
  }
]
```

------------------------------------------------------------------------

### GET `/api/shelters/:id`

–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∏—é—Ç –ø–æ ID.

------------------------------------------------------------------------

### GET `/api/shelters/:id/animals`

–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö –∏–∑ –ø—Ä–∏—é—Ç–∞.

------------------------------------------------------------------------

### POST `/api/shelters`

–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏—é—Ç.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):**

``` json
{
  "name": "–î–æ–±—Ä—ã–µ —Ä—É–∫–∏",
  "address": "—É–ª. –õ–µ–Ω–∏–Ω–∞, 10",
  "phone": "+79998887766",
  "email": "new@shelter.ru",
  "website": "https://new-shelter.ru",
  "description": "–ù–æ–≤—ã–π –ø—Ä–∏—é—Ç –¥–ª—è –∫–æ—à–µ–∫ –∏ —Å–æ–±–∞–∫.",
  "capacity": 80,
  "working_hours": "—Å 8:00 –¥–æ 20:00"
}
```

------------------------------------------------------------------------

### PUT `/api/shelters/:id`

–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—é—Ç–∞.

------------------------------------------------------------------------

### DELETE `/api/shelters/:id`

–£–¥–∞–ª–∏—Ç—å –ø—Ä–∏—é—Ç.

------------------------------------------------------------------------

## üë§ –†–∞–∑–¥–µ–ª: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (`/api/users`)

### GET `/api/users`

–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

------------------------------------------------------------------------

### GET `/api/users/:id`

–ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID.

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

``` json
{
  "id": 1,
  "firstname": "–ò–≤–∞–Ω",
  "lastname": "–ò–≤–∞–Ω–æ–≤",
  "role": "admin",
  "gender": "male",
  "email": "ivan@example.com"
}
```

------------------------------------------------------------------------

### POST `/api/users`

–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**

``` json
{
  "firstname": "–ò–≤–∞–Ω",
  "lastname": "–ò–≤–∞–Ω–æ–≤",
  "role": "admin",
  "gender": "male",
  "email": "ivan@example.com",
  "password": "123456"
}
```

------------------------------------------------------------------------

### PUT `/api/users/:id`

–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

------------------------------------------------------------------------

### DELETE `/api/users/:id`

–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

------------------------------------------------------------------------

## ‚öôÔ∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

-   –í—Å–µ POST/PUT/PATCH –∑–∞–ø—Ä–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç `Content-Type: application/json`,
    –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –∏–Ω–æ–µ.\
-   –í —Å–ª—É—á–∞–µ –æ—à–∏–±–æ–∫ —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –∫–ª—é—á–æ–º `error`.
